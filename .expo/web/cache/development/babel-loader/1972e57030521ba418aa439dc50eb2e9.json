{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _rxjs = require(\"rxjs\");\n\nvar _operators = require(\"rxjs/operators\");\n\nvar _default = function _default(_ref) {\n  var _ref$triggerPressEven = _ref.triggerPressEventBefore,\n      triggerPressEventBefore = _ref$triggerPressEven === void 0 ? 200 : _ref$triggerPressEven,\n      _ref$triggerLongPress = _ref.triggerLongPressEventAfter,\n      triggerLongPressEventAfter = _ref$triggerLongPress === void 0 ? 700 : _ref$triggerLongPress,\n      _ref$moveThreshold = _ref.moveThreshold,\n      moveThreshold = _ref$moveThreshold === void 0 ? 0 : _ref$moveThreshold;\n  return function (touches) {\n    var touchStart = new _rxjs.Subject().pipe((0, _operators.map)(function (e) {\n      return {\n        id: e.identifier,\n        type: \"start\",\n        event: e\n      };\n    }));\n    var touchMove = new _rxjs.Subject().pipe((0, _operators.map)(function (e) {\n      return {\n        id: e.identifier,\n        type: \"move\",\n        event: e\n      };\n    }));\n    var touchEnd = new _rxjs.Subject().pipe((0, _operators.map)(function (e) {\n      return {\n        id: e.identifier,\n        type: \"end\",\n        event: e\n      };\n    }));\n    var touchPress = touchStart.pipe((0, _operators.mergeMap)(function (e) {\n      return touchEnd.pipe((0, _operators.first)(function (x) {\n        return x.id === e.id;\n      }), (0, _operators.timeoutWith)(triggerPressEventBefore, (0, _rxjs.empty)()));\n    }), (0, _operators.map)(function (e) {\n      return (0, _extends2.default)({}, e, {\n        type: \"press\"\n      });\n    }));\n    var touchMoveDelta = (0, _rxjs.merge)(touchStart, touchMove, touchEnd).pipe((0, _operators.groupBy)(function (e) {\n      return e.id;\n    }), (0, _operators.mergeMap)(function (group) {\n      return group.pipe((0, _operators.pairwise)(), (0, _operators.map)(function (_ref2) {\n        var _ref3 = (0, _slicedToArray2.default)(_ref2, 2),\n            e1 = _ref3[0],\n            e2 = _ref3[1];\n\n        if (e1.type !== \"end\" && e2.type === \"move\") {\n          return {\n            id: group.key,\n            type: \"move\",\n            event: e2.event,\n            delta: {\n              locationX: e2.event.locationX - e1.event.locationX,\n              locationY: e2.event.locationY - e1.event.locationY,\n              pageX: e2.event.pageX - e1.event.pageX,\n              pageY: e2.event.pageY - e1.event.pageY,\n              timestamp: e2.event.timestamp - e1.event.timestamp\n            }\n          };\n        }\n      }), (0, _operators.filter)(function (e) {\n        return e;\n      }), (0, _operators.filter)(function (e) {\n        return Math.pow(e.delta.pageX, 2) + Math.pow(e.delta.pageY, 2) > Math.pow(moveThreshold, 2);\n      }));\n    }));\n    var longTouch = touchStart.pipe((0, _operators.mergeMap)(function (e) {\n      return (0, _rxjs.of)(e).pipe((0, _operators.delay)(triggerLongPressEventAfter), (0, _operators.takeUntil)((0, _rxjs.merge)(touchMoveDelta, touchEnd).pipe((0, _operators.first)(function (x) {\n        return x.id === e.id;\n      }))));\n    }), (0, _operators.map)(function (e) {\n      return (0, _extends2.default)({}, e, {\n        type: \"long-press\"\n      });\n    }));\n    var subscriptions = [touchStart, touchEnd, touchPress, longTouch, touchMoveDelta].map(function (x) {\n      return x.subscribe(function (y) {\n        return touches.push(y);\n      });\n    });\n    return {\n      process: function process(type, event) {\n        switch (type) {\n          case \"start\":\n            touchStart.next(event);\n            break;\n\n          case \"move\":\n            touchMove.next(event);\n            break;\n\n          case \"end\":\n            touchEnd.next(event);\n            break;\n        }\n      },\n      end: function end() {\n        subscriptions.forEach(function (x) {\n          return x.unsubscribe();\n        });\n        touchStart.unsubscribe();\n        touchMove.unsubscribe();\n        touchEnd.unsubscribe();\n        touchPress.unsubscribe();\n        longTouch.unsubscribe();\n      }\n    };\n  };\n};\n\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/Amanda/Documents/KOMA/project/MTDuellen/node_modules/react-native-game-engine/src/DefaultTouchProcessor.js"],"names":["triggerPressEventBefore","triggerLongPressEventAfter","moveThreshold","touches","touchStart","Subject","pipe","e","id","identifier","type","event","touchMove","touchEnd","touchPress","x","touchMoveDelta","group","e1","e2","key","delta","locationX","locationY","pageX","pageY","timestamp","longTouch","subscriptions","map","subscribe","y","push","process","next","end","forEach","unsubscribe"],"mappings":"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","sourcesContent":["import { Observable, Subject, empty, of, merge } from \"rxjs\";\nimport {\n\tmergeMap,\n\tfirst,\n\ttimeoutWith,\n\tdelay,\n\ttakeUntil,\n\tmap,\n\tgroupBy,\n\tfilter,\n\tpairwise\n} from \"rxjs/operators\";\n\nexport default ({\n\ttriggerPressEventBefore = 200,\n\ttriggerLongPressEventAfter = 700,\n\tmoveThreshold = 0\n}) => {\n\treturn touches => {\n\t\tlet touchStart = new Subject().pipe(\n\t\t\tmap(e => ({ id: e.identifier, type: \"start\", event: e }))\n\t\t);\n\t\tlet touchMove = new Subject().pipe(\n\t\t\tmap(e => ({ id: e.identifier, type: \"move\", event: e }))\n\t\t);\n\t\tlet touchEnd = new Subject().pipe(\n\t\t\tmap(e => ({ id: e.identifier, type: \"end\", event: e }))\n\t\t);\n\n\t\tlet touchPress = touchStart.pipe(\n\t\t\tmergeMap(e =>\n\t\t\t\ttouchEnd.pipe(\n\t\t\t\t\tfirst(x => x.id === e.id),\n\t\t\t\t\ttimeoutWith(triggerPressEventBefore, empty())\n\t\t\t\t)\n\t\t\t),\n\t\t\tmap(e => ({ ...e, type: \"press\" }))\n\t\t);\n\n\t\tlet touchMoveDelta = merge(touchStart, touchMove, touchEnd).pipe(\n\t\t\tgroupBy(e => e.id),\n\t\t\tmergeMap(group =>\n\t\t\t\tgroup.pipe(\n\t\t\t\t\tpairwise(),\n\t\t\t\t\tmap(([e1, e2]) => {\n\t\t\t\t\t\tif (e1.type !== \"end\" && e2.type === \"move\") {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid: group.key,\n\t\t\t\t\t\t\t\ttype: \"move\",\n\t\t\t\t\t\t\t\tevent: e2.event,\n\t\t\t\t\t\t\t\tdelta: {\n\t\t\t\t\t\t\t\t\tlocationX: e2.event.locationX - e1.event.locationX,\n\t\t\t\t\t\t\t\t\tlocationY: e2.event.locationY - e1.event.locationY,\n\t\t\t\t\t\t\t\t\tpageX: e2.event.pageX - e1.event.pageX,\n\t\t\t\t\t\t\t\t\tpageY: e2.event.pageY - e1.event.pageY,\n\t\t\t\t\t\t\t\t\ttimestamp: e2.event.timestamp - e1.event.timestamp\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tfilter(e => e),\n\t\t\t\t\tfilter(e => e.delta.pageX ** 2 + e.delta.pageY ** 2 > moveThreshold ** 2)\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\n\t\tlet longTouch = touchStart.pipe(\n\t\t\tmergeMap(e =>\n\t\t\t\tof(e).pipe(\n\t\t\t\t\tdelay(triggerLongPressEventAfter),\n\t\t\t\t\ttakeUntil(\n\t\t\t\t\t\tmerge(touchMoveDelta, touchEnd).pipe(\n\t\t\t\t\t\t\tfirst(x => x.id === e.id)\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t),\n\t\t\tmap(e => ({ ...e, type: \"long-press\" }))\n\t\t);\n\n\t\tlet subscriptions = [\n\t\t\ttouchStart,\n\t\t\ttouchEnd,\n\t\t\ttouchPress,\n\t\t\tlongTouch,\n\t\t\ttouchMoveDelta\n\t\t].map(x => x.subscribe(y => touches.push(y)));\n\n\t\treturn {\n\t\t\tprocess(type, event) {\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase \"start\":\n\t\t\t\t\t\ttouchStart.next(event);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"move\":\n\t\t\t\t\t\ttouchMove.next(event);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"end\":\n\t\t\t\t\t\ttouchEnd.next(event);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\t\t\tend() {\n\t\t\t\tsubscriptions.forEach(x => x.unsubscribe());\n\t\t\t\ttouchStart.unsubscribe();\n\t\t\t\ttouchMove.unsubscribe();\n\t\t\t\ttouchEnd.unsubscribe();\n\t\t\t\ttouchPress.unsubscribe();\n\t\t\t\tlongTouch.unsubscribe();\n\t\t\t}\n\t\t};\n\t};\n};\n"]},"metadata":{},"sourceType":"script"}