{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _DefaultTimer = _interopRequireDefault(require(\"./DefaultTimer\"));\n\nvar _DefaultTouchProcessor = _interopRequireDefault(require(\"./DefaultTouchProcessor\"));\n\nvar _jsxFileName = \"C:\\\\Users\\\\Amanda\\\\Documents\\\\KOMA\\\\project\\\\MTDuellen\\\\node_modules\\\\react-native-game-engine\\\\src\\\\GameLoop.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar GameLoop = function (_Component) {\n  (0, _inherits2.default)(GameLoop, _Component);\n\n  var _super = _createSuper(GameLoop);\n\n  function GameLoop(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, GameLoop);\n    _this = _super.call(this, props);\n\n    _this.start = function () {\n      _this.touches.length = 0;\n      _this.previousTime = null;\n      _this.previousDelta = null;\n\n      _this.timer.start();\n    };\n\n    _this.stop = function () {\n      _this.timer.stop();\n    };\n\n    _this.updateHandler = function (currentTime) {\n      var args = {\n        touches: _this.touches,\n        screen: _this.screen,\n        layout: _this.layout,\n        time: {\n          current: currentTime,\n          previous: _this.previousTime,\n          delta: currentTime - (_this.previousTime || currentTime),\n          previousDelta: _this.previousDelta\n        }\n      };\n      if (_this.props.onUpdate) _this.props.onUpdate(args);\n      _this.touches.length = 0;\n      _this.previousTime = currentTime;\n      _this.previousDelta = args.time.delta;\n    };\n\n    _this.onLayoutHandler = function (e) {\n      _this.screen = _reactNative.Dimensions.get(\"window\");\n      _this.layout = e.nativeEvent.layout;\n\n      _this.forceUpdate();\n    };\n\n    _this.onTouchStartHandler = function (e) {\n      _this.touchProcessor.process(\"start\", e.nativeEvent);\n    };\n\n    _this.onTouchMoveHandler = function (e) {\n      _this.touchProcessor.process(\"move\", e.nativeEvent);\n    };\n\n    _this.onTouchEndHandler = function (e) {\n      _this.touchProcessor.process(\"end\", e.nativeEvent);\n    };\n\n    _this.timer = props.timer || new _DefaultTimer.default();\n\n    _this.timer.subscribe(_this.updateHandler);\n\n    _this.touches = [];\n    _this.screen = _reactNative.Dimensions.get(\"window\");\n    _this.previousTime = null;\n    _this.previousDelta = null;\n    _this.touchProcessor = props.touchProcessor(_this.touches);\n    _this.layout = null;\n    return _this;\n  }\n\n  (0, _createClass2.default)(GameLoop, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.running) this.start();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stop();\n      this.timer.unsubscribe(this.updateHandler);\n      if (this.touchProcessor.end) this.touchProcessor.end();\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      if (nextProps.running !== this.props.running) {\n        if (nextProps.running) this.start();else this.stop();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react.default.createElement(_reactNative.View, {\n        style: [css.container, this.props.style],\n        onLayout: this.onLayoutHandler,\n        onTouchStart: this.onTouchStartHandler,\n        onTouchMove: this.onTouchMoveHandler,\n        onTouchEnd: this.onTouchEndHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 7\n        }\n      }, this.props.children);\n    }\n  }]);\n  return GameLoop;\n}(_react.Component);\n\nexports.default = GameLoop;\nGameLoop.defaultProps = {\n  touchProcessor: (0, _DefaultTouchProcessor.default)({\n    triggerPressEventBefore: 200,\n    triggerLongPressEventAfter: 700\n  }),\n  running: true\n};\n\nvar css = _reactNative.StyleSheet.create({\n  container: {\n    flex: 1\n  }\n});","map":{"version":3,"sources":["C:/Users/Amanda/Documents/KOMA/project/MTDuellen/node_modules/react-native-game-engine/src/GameLoop.js"],"names":["GameLoop","props","start","touches","length","previousTime","previousDelta","timer","stop","updateHandler","currentTime","args","screen","layout","time","current","previous","delta","onUpdate","onLayoutHandler","e","Dimensions","get","nativeEvent","forceUpdate","onTouchStartHandler","touchProcessor","process","onTouchMoveHandler","onTouchEndHandler","DefaultTimer","subscribe","running","unsubscribe","end","nextProps","css","container","style","children","Component","defaultProps","triggerPressEventBefore","triggerLongPressEventAfter","StyleSheet","create","flex"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { View, StyleSheet, Dimensions } from \"react-native\";\nimport DefaultTimer from \"./DefaultTimer\";\nimport DefaultTouchProcessor from \"./DefaultTouchProcessor\";\n\nexport default class GameLoop extends Component {\n  constructor(props) {\n    super(props);\n    this.timer = props.timer || new DefaultTimer();\n    this.timer.subscribe(this.updateHandler);\n    this.touches = [];\n    this.screen = Dimensions.get(\"window\");\n    this.previousTime = null;\n    this.previousDelta = null;\n    this.touchProcessor = props.touchProcessor(this.touches);\n    this.layout = null;\n  }\n\n  componentDidMount() {\n    if (this.props.running) this.start();\n  }\n\n  componentWillUnmount() {\n    this.stop();\n    this.timer.unsubscribe(this.updateHandler);\n    if (this.touchProcessor.end) this.touchProcessor.end();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.running !== this.props.running) {\n      if (nextProps.running) this.start();\n      else this.stop();\n    }\n  }\n\n  start = () => {\n    this.touches.length = 0;\n    this.previousTime = null;\n    this.previousDelta = null;\n    this.timer.start();\n  };\n\n  stop = () => {\n    this.timer.stop();\n  };\n\n  updateHandler = currentTime => {\n    let args = {\n      touches: this.touches,\n      screen: this.screen,\n      layout: this.layout,\n      time: {\n        current: currentTime,\n        previous: this.previousTime,\n        delta: currentTime - (this.previousTime || currentTime),\n        previousDelta: this.previousDelta\n      }\n    };\n\n    if (this.props.onUpdate) this.props.onUpdate(args);\n\n    this.touches.length = 0;\n    this.previousTime = currentTime;\n    this.previousDelta = args.time.delta;\n  };\n\n  onLayoutHandler = e => {\n    this.screen = Dimensions.get(\"window\");\n    this.layout = e.nativeEvent.layout;\n    this.forceUpdate();\n  };\n\n  onTouchStartHandler = e => {\n    this.touchProcessor.process(\"start\", e.nativeEvent);\n  };\n\n  onTouchMoveHandler = e => {\n    this.touchProcessor.process(\"move\", e.nativeEvent);\n  };\n\n  onTouchEndHandler = e => {\n    this.touchProcessor.process(\"end\", e.nativeEvent);\n  };\n\n  render() {\n    return (\n      <View\n        style={[css.container, this.props.style]}\n        onLayout={this.onLayoutHandler}\n        onTouchStart={this.onTouchStartHandler}\n        onTouchMove={this.onTouchMoveHandler}\n        onTouchEnd={this.onTouchEndHandler}\n      >\n        {this.props.children}\n      </View>\n    );\n  }\n}\n\nGameLoop.defaultProps = {\n  touchProcessor: DefaultTouchProcessor({\n    triggerPressEventBefore: 200,\n    triggerLongPressEventAfter: 700\n  }),\n  running: true\n};\n\nconst css = StyleSheet.create({\n  container: {\n    flex: 1\n  }\n});\n"]},"metadata":{},"sourceType":"script"}